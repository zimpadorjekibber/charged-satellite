generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id           String @id @default(cuid())
  serialNumber String?
  name         String
  username     String @unique
  password     String
  role         String // 'admin' | 'staff'
}

model Table {
  id   String @id @default(cuid())
  name String
}

model MenuItem {
  id           String  @id @default(cuid())
  name         String
  description  String
  price        Float
  category     String // 'Starters' | 'Main Course' | 'Beverages' | 'Dessert'
  image        String?
  isVegetarian Boolean @default(false)
  isSpicy      Boolean @default(false)
  available    Boolean @default(true)
}

model Order {
  id           String      @id @default(cuid())
  tableId      String
  status       String // 'Pending' | 'Preparing' | 'Ready' | 'Served' | 'Paid' | 'Rejected'
  totalAmount  Float
  createdAt    DateTime    @default(now())
  acceptedAt   DateTime?
  customerName String?
  items        OrderItem[]
}

model OrderItem {
  id         String @id @default(cuid())
  orderId    String
  menuItemId String
  quantity   Int
  name       String // Snapshot of name
  price      Float // Snapshot of price
  order      Order  @relation(fields: [orderId], references: [id], onDelete: Cascade)
}

model Notification {
  id        String   @id @default(cuid())
  tableId   String
  type      String // 'call_staff' | 'bill_request'
  status    String   @default("pending") // 'pending' | 'resolved'
  createdAt DateTime @default(now())
}

model Review {
  id           String   @id @default(cuid())
  customerName String
  rating       Int
  comment      String
  createdAt    DateTime @default(now())
}
